<html>
    <head>
        <title>Justforshow 0.2</title>
        <link rel="stylesheet" href="./main.css">
    </head>
    <body>
        <div style="position: fixed; font-weight: 700; font-size: 3em; z-index: 1000;"><span data-counter="0">0</span></div>
        
        <div style="min-height: 3000px;">
            <div data-section data-logger style="width: 100%; height: 400px; background: white"></div>
            <div data-section data-jfs data-jfs-from="opacity-50" class="transition duration-1000" style="width: 100%; height: 400px; background: grey"></div>
            <div data-section data-logger style="width: 100%; height: 400px; background: white"></div>

            <img src="./test_image_1.png" data-lazyload data-jfs-lazyload-from="loading" data-jfs-lazyload="https://images.unsplash.com/photo-1460485260172-af9d8b7c0c95?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=7952&q=80" style="width: 100%;" alt="Example">
            
            <div data-section data-logger style="width: 100%; height: 400px; background: white"></div>
            <div data-section data-jfs data-jfs-repeat data-jfs-from="opacity-50" class="transition duration-1000" style="width: 100%; height: 400px; background: grey"></div>
            <div data-section data-logger style="width: 100%; height: 400px; background: white"></div>
            <div data-section data-jfs data-jfs-from="opacity-50" class="transition duration-1000" style="width: 100%; height: 400px; background: grey"></div>
            <div data-section data-logger style="width: 100%; height: 400px; background: white"></div>
        </div>

        <script src="./justforshow/Justforshow.js"></script>
        <script src="./justforshow/AnimateFrom.js"></script>
        <script src="./justforshow/LazyLoadingImage.js"></script>
        
        <script>
            class SectionCounter {
                constructor(element) {
                    this.element = element;

                    this.counter = document.querySelector('[data-counter]');
                    this.counted = false;
                }
                onLeaveTop() {
                    if(this.counted) return;

                    let count = parseInt(this.counter.getAttribute('data-counter'));
                    count++;
                    this.counter.setAttribute('data-counter', count);
                    this.counter.innerHTML = count;
                    this.counted = true;
                }
            }
        </script>

        <script>
            new JustForShow('[data-jfs]', {
                /* default settings */
                preset: 'animate-from',
                syncScrollPosition: true,
                root: null,
                rootMargin: '0px 0px -200px 0px',
                threshold: [0],
                onEnterBottom: (element) => {
                    console.log(element);
                }
            });

            new JustForShow('[data-lazyload]', 'lazyload');

            new JustForShow('[data-logger]', {
                onEnterBottom: function(element) {
                    console.log('Scrolling down enter ...');
                },
                onEnterTop: function(element) {
                    console.log('Scrolling up enter ...');
                },
                onLeaveTop: function(element) {
                    console.log('Scrolling up leave ...');
                },
                onLeaveBottom: function(element) {
                    console.log('Scrolling down leave ...');
                }
            });

            new JustForShow('[data-section]', {
                preset: (element) => new SectionCounter(element),
                syncScrollPosition: false
            });
        </script>

    </body>
</html>